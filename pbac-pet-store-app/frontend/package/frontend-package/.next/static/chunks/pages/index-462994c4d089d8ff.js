(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{7276:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(7268)}])},7268:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var n=s(4848),a=s(3013),o=s(6715),c=s(6540);function r(){let[e,t]=(0,c.useState)("");return(0,c.useEffect)(()=>{(async function(){try{let e=await fetch("/api/passkey-url"),s=await e.json();t(s.passkeyUrl)}catch(e){console.error("Error fetching passkey URL:",e)}})()},[]),(0,n.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("img",{src:"/thumbprint.png",alt:"Passkey",height:"50"})})}var i=s(9680),l=s.n(i);function d(){let{data:e}=(0,a.useSession)(),[t,s]=(0,c.useState)("API Status"),[i,d]=(0,c.useState)(""),[h,p]=(0,c.useState)(""),[u,m]=(0,c.useState)(""),[j,b]=(0,c.useState)(""),[x,g]=(0,c.useState)(!1),[C,T]=(0,c.useState)(!1),[v,f]=(0,c.useState)(!1),[P,y]=(0,c.useState)(""),[E,I]=(0,c.useState)(""),[k,N]=(0,c.useState)(""),[A,D]=(0,c.useState)("1");(0,c.useEffect)(()=>{e?("API Status"==t||"User logged in, API ready to execute."==h)&&(p('<span class="'.concat(l().green,'">User logged in, API ready to execute.</span>')),D("1")):p('<span class="'.concat(l().value,'">Login before attempting to access the API.</span>'))},[e]);let w=(0,o.useRouter)(),S=async()=>{try{var t="no-token";e&&(t=e.idToken),g(!1),T(!1),f(!1);let a=await fetch("/api/getPetsApiEndpoint",{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});var s=(await a.json()).endpoint;let o=A||"1";var n=s+"stores/"+o+"/pets";p('<div class="'.concat(l().sourceCodeContainer,'"><span class="').concat(l().sourceCode,'">curl -X GET ').concat(n," \\<br> -H 'Authorization: Bearer ").concat(t,"'\\<br> -H 'Content-Type: application/json' | jq</span></div>")),d("API Response"),m(""),b("Loading...");let c=await fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),r=await c.json();b(B(r))}catch(e){console.log(e),b("Error: Not Authorized"),b(B({Message:"Access Denied"}))}},_=async t=>{try{var s="no-token";e&&(s=e.idToken);let a=await fetch("/api/getPetsApiEndpoint",{method:"GET",headers:{"Cache-Control":"no-cache"}});console.log("h2");let o=await a.json(),c=A||"1";var n=o.endpoint+"stores/"+c+"/pets/"+t;p('<div class="'.concat(l().sourceCodeContainer,'"><span class="').concat(l().sourceCode,'">curl -X GET ').concat(n," \\<br> -H 'Authorization: Bearer ").concat(s,"'\\<br> -H 'Content-Type: application/json' | jq</span></div>")),d("API Response"),m(""),b("Loading..."),console.log(n);let r=await fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),i=await r.json();b(B(i))}catch(e){b("Error: Not Authorized"),b(B({Message:"Access Denied"}))}},L=async(t,n,a)=>{try{var o="no-token";e&&(o=e.idToken);let c=await fetch("/api/getPetsApiEndpoint",{method:"GET",headers:{"Cache-Control":"no-cache"}}),r=await c.json(),i=A||"1",d=r.endpoint+"stores/"+i+"/pets";s("Calling POST /pets"),b("Loading..."),p('<div class="'.concat(l().sourceCodeContainer,'"><span class="').concat(l().sourceCode,'">curl -X POST ').concat(d,' -d \'{"id": ').concat(t,', "type": "').concat(n,'", "price": "').concat(a,"\"}' \\<br> -H 'Authorization: Bearer ").concat(o,"'\\<br> -H 'Content-Type: application/json' | jq</span></div>"));let h=await fetch(d,{method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},body:JSON.stringify({id:Number(t),type:n,price:a})});console.log("Response: ",h);let u=await h.json();b(B(u))}catch(e){b("Error: Not Authorized"),b(B({Message:"Access Denied"}))}},R=async t=>{try{var n="no-token";e&&(n=e.idToken);let a=await fetch("/api/getPetsApiEndpoint",{method:"GET",headers:{"Cache-Control":"no-cache"}}),o=await a.json(),c=A||"1",r=o.endpoint+"stores/"+c+"/pets/"+t;console.log("API Endpoint:",r),s("Calling DELETE /pets/{id}"),b("Loading..."),p('<div class="'.concat(l().sourceCodeContainer,'"><span class="').concat(l().sourceCode,'">curl -X DELETE ').concat(r," \\<br> -H 'Authorization: Bearer ").concat(n,"'\\<br> -H 'Content-Type: application/json' | jq</span></div>"));let i=await fetch(r,{method:"DELETE",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),d=await i.json();b(B(d))}catch(e){b("Error: Not Authorized"),b(B({Message:"Access Denied"}))}},B=e=>("string"!=typeof e&&(e=JSON.stringify(e,null,2)),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*")(\s*:\s*)(.*)/g,function(e,t,s,n,a){return'<span class="'.concat(l().key,'">').concat(t,"</span>").concat(n,'<span class="').concat(l().value,'">').concat(a,"</span>")}));return(0,n.jsxs)("div",{className:l().container,children:[(0,n.jsxs)("header",{className:l().header,children:[(0,n.jsx)("div",{className:l().headertitle1,children:"Wyld Pets Store - with PBAC"}),e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:l().signedInText,children:[(0,n.jsxs)("p",{children:["Signed in as: ",(0,n.jsx)("b",{children:e.user.name})]}),(0,n.jsx)(r,{})]}),(0,n.jsx)("button",{onClick:()=>{w.push("/logout")},className:l().loginButton,children:"Logout"})]}):(0,n.jsx)("button",{onClick:()=>(0,a.signIn)("cognito"),className:l().loginButton,children:"Sign in with Cognito"})]}),(0,n.jsxs)("main",{className:l().main,children:[(0,n.jsxs)("div",{className:l().leftColumn,children:[(0,n.jsxs)("div",{className:l().buttonContainer,children:[(0,n.jsx)("h3",{children:(0,n.jsx)("b",{children:"Token Actions"})}),(0,n.jsx)("button",{onClick:()=>{e?(g(!1),T(!1),f(!1),b(""),s("Decoded Access Token"),p(B(e.decodedAccessToken)),d("Raw Access Token"),m(e.accessToken)):(g(!1),T(!1),f(!1),b(""),s("Decoded Access Token"),p('<span class="'.concat(l().value,'">Login before attempting to access the API.</span>')),d(""))},className:l().button,children:"View Access Token"}),(0,n.jsx)("button",{onClick:()=>{e?(g(!1),T(!1),f(!1),b(""),s("Decoded ID Token"),p(B(e.decodedIdToken)),d("Raw ID Token"),m(e.idToken)):(g(!1),T(!1),f(!1),b(""),s("Decoded ID Token"),p('<span class="'.concat(l().value,'">Login before attempting to access the API.</span>')),d(""))},className:l().button,children:"View ID Token"})]}),(0,n.jsxs)("div",{className:l().buttonContainer,children:[(0,n.jsx)("h3",{children:(0,n.jsx)("b",{children:"API Actions"})}),(0,n.jsx)("h4",{style:{color:"red"},children:"Enter a store first for any pet actions"}),(0,n.jsx)("form",{class:"Home_form__FrVR9",children:(0,n.jsxs)("div",{className:l().formRow,style:{backgroundColor:"#e0e0e0"},children:[(0,n.jsx)("label",{htmlFor:"storeId",children:"Store ID:"}),(0,n.jsx)("input",{type:"text",id:"storeId",value:A,onChange:e=>D(e.target.value),placeholder:"Enter store ID (default: 1)",required:!0})]})}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:l().accordionContainer,children:[(0,n.jsx)("b",{children:"List"})," Pets",(0,n.jsx)("br",{}),(0,n.jsxs)("button",{onClick:S,className:l().button,children:["Call ",(0,n.jsx)("b",{children:"GET"})," /store/:storeId/pets"]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),(0,n.jsxs)("div",{className:l().accordionContainer,children:[(0,n.jsx)("b",{children:"GET"})," Pets by ID",(0,n.jsx)("br",{}),(0,n.jsxs)("button",{onClick:()=>{g(!x),x||(T(!1),f(!1),s("GET Pets by ID"),p("To get a pet by ID, enter the Pet ID in the form and click 'Submit'.<br> This will make a GET request to the /pets/{id} endpoint."),p('<div class="'.concat(l().sourceCodeContainer,'"><span class="').concat(l().sourceCode,"\">To get a pet by ID, enter the Pet ID in the form and click 'Submit'.<br> This will make a GET request to the /pets/{id} endpoint.</span></div>")),d("API Response"),m(" "),b("Waiting for input..."))},className:l().button,children:[x?"Close":"Open"," ",(0,n.jsx)("b",{children:"GET"})," /store/",A,"/pets/","{id}"," "]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),x&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_(P)},className:l().form,children:[(0,n.jsxs)("div",{className:l().formRow,children:[(0,n.jsx)("label",{htmlFor:"petId",children:"Pet ID:"}),(0,n.jsx)("input",{type:"number",id:"petId",value:P,onChange:e=>y(e.target.value),required:!0})]}),(0,n.jsx)("button",{type:"submit",className:l().accordionButton,children:"Submit"})]})]}),(0,n.jsxs)("div",{className:l().accordionContainer,children:[(0,n.jsx)("b",{children:"POST"})," Create New Pet",(0,n.jsx)("br",{}),(0,n.jsxs)("button",{onClick:()=>{T(!C),g(!1),f(!1),C||(s("GET Pets by ID"),p("To get a pet by ID, enter the Pet ID in the form and click 'Submit'.<br> This will make a GET request to the /pets/{id} endpoint."),p('<div class="'.concat(l().sourceCodeContainer,'"><span class="').concat(l().sourceCode,"\">To get a pet by ID, enter the Pet ID in the form and click 'Submit'. <br /> Example:<br />   Pet ID: 4<br />   Pet Type: lizard <br />   Pet Price: 25 </span></div>")),d("API Response"),m(" "),b("Waiting for input..."))},className:l().button,children:[C?"Close":"Open"," ",(0,n.jsx)("b",{children:"POST"})," /pets Form"]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),C&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),L(P,E,k)},className:l().form,children:[(0,n.jsxs)("div",{className:l().formRow,children:[(0,n.jsx)("label",{htmlFor:"createPetId",children:"Pet ID:"}),(0,n.jsx)("input",{type:"number",id:"createPetId",value:P,onChange:e=>y(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:l().formRow,children:[(0,n.jsx)("label",{htmlFor:"petType",children:"Pet Type:"}),(0,n.jsx)("input",{type:"text",id:"petType",value:E,onChange:e=>I(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:l().formRow,children:[(0,n.jsx)("label",{htmlFor:"petPrice",children:"Pet Price:"}),(0,n.jsx)("input",{type:"text",id:"petPrice",value:k,onChange:e=>N(e.target.value),required:!0})]}),(0,n.jsx)("button",{type:"submit",className:l().accordionButton,children:"Submit"})]})]}),(0,n.jsxs)("div",{className:l().accordionContainer,children:[(0,n.jsx)("b",{children:"DELETE"})," Pet by ID",(0,n.jsx)("br",{}),(0,n.jsxs)("button",{onClick:()=>{f(!v),T(!1),g(!1),v||(s("DELETE Pet by ID"),p('<div class="'.concat(l().sourceCodeContainer,'"><span class="').concat(l().sourceCode,"\">To delete a pet by ID, enter the Pet ID in the form and click 'Submit'.<br /> This will make a DELETE request to the /pets/{id} endpoint.</span></div>")),d("API Response"),m(" "),b("Waiting for input..."))},className:l().button,children:[v?"Close":"Open"," ",(0,n.jsx)("b",{children:"DELETE"})," /pets/","{id}"," Form"]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),v&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R(P)},className:l().form,children:[(0,n.jsxs)("div",{className:l().formRow,children:[(0,n.jsx)("label",{htmlFor:"deletePetId",children:"Pet ID:"}),(0,n.jsx)("input",{type:"text",id:"deletePetId",value:P,onChange:e=>y(e.target.value),required:!0})]}),(0,n.jsx)("button",{type:"submit",className:l().accordionButton,children:"Submit"})]})]})]})]}),(0,n.jsxs)("div",{className:l().rightColumn,children:[(0,n.jsx)("p",{children:(0,n.jsx)("b",{children:t})}),(0,n.jsx)("pre",{dangerouslySetInnerHTML:{__html:h}}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{children:(0,n.jsx)("b",{children:i})}),(0,n.jsx)("pre",{dangerouslySetInnerHTML:{__html:j}}),u]})]}),(0,n.jsx)("footer",{className:l().footer,children:(0,n.jsx)("p",{children:"AWS - Wyld Pets Store Demo with PBAC for re:Inforce 2025 - All Rights Reserved 2025"})})]})}},6715:(e,t,s)=>{e.exports=s(8440)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7276)),_N_E=e.O()}]);