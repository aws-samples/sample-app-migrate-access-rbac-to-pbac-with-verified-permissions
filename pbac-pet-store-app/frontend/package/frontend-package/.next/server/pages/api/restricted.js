"use strict";(()=>{var e={};e.id=708,e.ids=[708],e.modules={1657:e=>{e.exports=require("aws-jwt-verify")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,r){return r in n?n[r]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,r)):"function"==typeof n&&"default"===r?n:void 0}}})},6624:(e,n,r)=>{r.r(n),r.d(n,{config:()=>p,default:()=>d,routeModule:()=>f});var t={};r.r(t),r.d(t,{default:()=>u});var s=r(9947),o=r(2706),i=r(6762);let a=require("next-auth/next");var c=r(7327);let u=async(e,n)=>{await (0,a.getServerSession)(e,n,c.authOptions)?n.send({content:"This is protected content. You can access this content because you are signed in."}):n.send({error:"You must be signed in to view the protected content on this page."})},d=(0,i.M)(t,"default"),p=(0,i.M)(t,"config"),f=new s.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/restricted",pathname:"/api/restricted",bundlePath:"",filename:""},userland:t})},7327:(e,n,r)=>{r.r(n),r.d(n,{authOptions:()=>c,default:()=>u});let t=require("next-auth");var s=r.n(t);let o=require("next-auth/providers/cognito");var i=r.n(o);function a(e){var n=e.split(".")[1];return JSON.parse(Buffer.from(n,"base64").toString())}r(1657);let c={providers:[i()({clientId:process.env.COGNITO_CLIENT_ID,clientSecret:process.env.COGNITO_CLIENT_SECRET,issuer:process.env.COGNITO_ISSUER,authorization:{params:{scope:"openid profile PetStoreApi/Read"}}})],callbacks:{jwt:async({token:e,account:n,user:r})=>(n&&(e.accessToken=n.access_token,e.idToken=n.id_token,e.refreshToken=n.refresh_token),e),async session({session:e,token:n,user:r}){e.accessToken=n.accessToken,e.idToken=n.idToken,e.refreshToken=n.refreshToken;var t=a(n.accessToken);return JSON.stringify(t,void 0,2),e.decodedAccessToken=JSON.stringify(a(n.accessToken),void 0,2),e.decodedIdToken=JSON.stringify(a(n.idToken),void 0,2),e.user.name=t.username,e.user.email=t.email,e.user.sub=t.sub,e.user.accessToken=t.accessToken,e.user.groups=t["cognito:groups"],e}}},u=s()(c)},2706:(e,n)=>{var r;Object.defineProperty(n,"A",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(r||(r={}))},9947:(e,n,r)=>{e.exports=r(5600)}};var n=require("../../webpack-api-runtime.js");n.C(e);var r=n(n.s=6624);module.exports=r})();