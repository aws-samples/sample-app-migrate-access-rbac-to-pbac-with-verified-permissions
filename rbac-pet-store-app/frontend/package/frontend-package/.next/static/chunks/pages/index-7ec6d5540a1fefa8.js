(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{7276:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7231)}])},7231:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var s=n(4848),a=n(3013),o=n(6715),c=n(6540),i=n(9680),r=n.n(i);function l(){let{data:e}=(0,a.useSession)(),[t,n]=(0,c.useState)("API Status"),[i,l]=(0,c.useState)(""),[d,p]=(0,c.useState)(""),[u,h]=(0,c.useState)(""),[m,j]=(0,c.useState)(""),[b,x]=(0,c.useState)(!1),[g,C]=(0,c.useState)(!1),[T,v]=(0,c.useState)(!1),[P,N]=(0,c.useState)(""),[y,f]=(0,c.useState)(""),[E,A]=(0,c.useState)(""),[k,I]=(0,c.useState)(""),[w,S]=(0,c.useState)("1");(0,c.useEffect)(()=>{e?("API Status"==t||"User logged in, API ready to execute."==d)&&p('<span class="'.concat(r().green,'">User logged in, API ready to execute.</span><br/><br/><span class="').concat(r().value,'">You can now make API calls to manage pets.</span>')):p('<span class="'.concat(r().value,'">Login before attempting to access the API.</span>'))},[e]);let D=(0,o.useRouter)(),L=async()=>{try{var t="no-token";e&&(t=e.idToken),x(!1),C(!1),v(!1);let s=await fetch("/api/getPetsApiEndpoint");var n=(await s.json()).endpoint;p('<div class="'.concat(r().sourceCodeContainer,'"><span class="').concat(r().sourceCode,'">curl -X GET ').concat(n," \\\\<br> -H 'Authorization: Bearer ").concat(t,"'\\\\<br> -H 'Content-Type: application/json' | jq</span></div>")),l("API Response"),h(""),j("Loading...");let a=await fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),o=await a.json();j(B(o))}catch(e){console.log(e),j("Error: Not Authorized"),j(B({Message:"Access Denied"}))}},R=async t=>{try{var n="no-token";e&&(n=e.idToken);let a=await fetch("/api/getPetsApiEndpoint",{method:"GET",headers:{"Cache-Control":"no-cache"}});var s=(await a.json()).endpoint+"/"+t;p('<div class="'.concat(r().sourceCodeContainer,'"><span class="').concat(r().sourceCode,'">curl -X GET ').concat(s," \\\\<br> -H 'Authorization: Bearer ").concat(n,"'\\\\<br> -H 'Content-Type: application/json' | jq</span></div>")),l("API Response"),h(""),j("Loading...");let o=await fetch(s,{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),c=await o.json();j(B(c))}catch(e){j("Error: Not Authorized"),j(B({Message:"Access Denied"}))}},_=async(t,s,a,o)=>{try{var c="no-token";e&&(c=e.idToken);let i=await fetch("/api/getPetsApiEndpoint",{method:"GET",headers:{"Cache-Control":"no-cache"}}),l=(await i.json()).endpoint;n("Calling POST /pets"),j("Loading..."),p('<div class="'.concat(r().sourceCodeContainer,'"><span class="').concat(r().sourceCode,'">curl -X POST ').concat(l,' -d \'{"id": ').concat(t,', "type": "').concat(s,'", "price": "').concat(a,'", "name": "').concat(o,"\"}' \\\\<br> -H 'Authorization: Bearer ").concat(c,"'\\\\<br> -H 'Content-Type: application/json' | jq</span></div>"));let d=await fetch(l,{method:"POST",headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"},body:JSON.stringify({id:Number(t),type:s,price:a,name:o})}),u=await d.json();j(B(u))}catch(e){j("Error: Not Authorized"),j(B({Message:"Access Denied"}))}},z=async t=>{try{var s="no-token";e&&(s=e.idToken);let a=await fetch("/api/getPetsApiEndpoint",{method:"GET",headers:{"Cache-Control":"no-cache"}}),o=(await a.json()).endpoint+"/"+t;n("Calling DELETE /pets/{id}"),j("Loading..."),p('<div class="'.concat(r().sourceCodeContainer,'"><span class="').concat(r().sourceCode,'">curl -X DELETE ').concat(o," \\\\<br> -H 'Authorization: Bearer ").concat(s,"'\\\\<br> -H 'Content-Type: application/json' | jq</span></div>"));let c=await fetch(o,{method:"DELETE",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}),i=await c.json();j(B(i))}catch(e){j("Error: Not Authorized"),j(B({Message:"Access Denied"}))}},B=e=>("string"!=typeof e&&(e=JSON.stringify(e,null,2)),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(\"(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\\"])*\")(\\s*:\\s*)(.*)/g,function(e,t,n,s,a){return'<span class="'.concat(r().key,'">').concat(t,"</span>").concat(s,'<span class="').concat(r().value,'">').concat(a,"</span>")}));return(0,s.jsxs)("div",{className:r().container,children:[(0,s.jsxs)("header",{className:r().header,children:[(0,s.jsx)("div",{className:r().headertitle1,children:"Wyld Pets Store - with RBAC"}),e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:r().signedInText,children:[(0,s.jsxs)("p",{children:["Signed in as: ",(0,s.jsx)("b",{children:e.user.name})]}),(0,s.jsx)("img",{src:"/thumbprint.png",alt:"Passkey",height:"50"})]}),(0,s.jsx)("button",{onClick:()=>{D.push("/logout")},className:r().loginButton,children:"Logout"})]}):(0,s.jsx)("button",{onClick:()=>(0,a.signIn)("cognito"),className:r().loginButton,children:"Sign in with Cognito"})]}),(0,s.jsxs)("main",{className:r().main,children:[(0,s.jsxs)("div",{className:r().leftColumn,children:[(0,s.jsxs)("div",{className:r().buttonContainer,children:[(0,s.jsx)("h3",{children:(0,s.jsx)("b",{children:"Token Actions"})}),(0,s.jsx)("button",{onClick:()=>{e?(x(!1),C(!1),v(!1),j(""),n("Decoded Access Token"),p(B(e.decodedAccessToken)),l("Raw Access Token"),h(e.accessToken)):(x(!1),C(!1),v(!1),j(""),n("Decoded Access Token"),p('<span class="'.concat(r().value,'">Login before attempting to access the API.</span>')),l(""))},className:r().button,children:"View Access Token"}),(0,s.jsx)("button",{onClick:()=>{e?(x(!1),C(!1),v(!1),j(""),n("Decoded ID Token"),p(B(e.decodedIdToken)),l("Raw ID Token"),h(e.idToken)):(x(!1),C(!1),v(!1),j(""),n("Decoded ID Token"),p('<span class="'.concat(r().value,'">Login before attempting to access the API.</span>')),l(""))},className:r().button,children:"View ID Token"})]}),(0,s.jsxs)("div",{className:r().buttonContainer,children:[(0,s.jsx)("h3",{children:(0,s.jsx)("b",{children:"API Actions"})}),(0,s.jsxs)("div",{className:r().accordionContainer,children:[(0,s.jsx)("b",{children:"List"})," Pets",(0,s.jsx)("br",{}),(0,s.jsxs)("button",{onClick:L,className:r().button,children:["Call ",(0,s.jsx)("b",{children:"GET"})," /pets"]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]}),(0,s.jsxs)("div",{className:r().accordionContainer,children:[(0,s.jsx)("b",{children:"GET"})," Pets by ID",(0,s.jsx)("br",{}),(0,s.jsxs)("button",{onClick:()=>{x(!b),b||(C(!1),v(!1),n("GET Pets by ID"),p('<div class="'.concat(r().sourceCodeContainer,'"><span class="').concat(r().sourceCode,"\">To get a pet by ID, enter the Pet ID in the form and click 'Submit'.<br> This will make a GET request to the /pets/{id} endpoint.</span></div>")),l("API Response"),h(" "),j("Waiting for input..."))},className:r().button,children:[b?"Close":"Open"," ",(0,s.jsx)("b",{children:"GET"})," /pets/","{id}"," "]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),b&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R(P)},className:r().form,children:[(0,s.jsxs)("div",{className:r().formRow,children:[(0,s.jsx)("label",{htmlFor:"petId",children:"Pet ID:"}),(0,s.jsx)("input",{type:"number",id:"petId",value:P,onChange:e=>N(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:r().accordionButton,children:"Submit"})]})]}),(0,s.jsxs)("div",{className:r().accordionContainer,children:[(0,s.jsx)("b",{children:"POST"})," Create New Pet",(0,s.jsx)("br",{}),(0,s.jsxs)("button",{onClick:()=>{C(!g),x(!1),v(!1),g||(n("Create New Pet"),p('<div class="'.concat(r().sourceCodeContainer,'"><span class="').concat(r().sourceCode,"\">To create a new pet, fill in the details and click 'Submit'. <br /> Example:<br />   Pet ID: 4<br />   Pet Type: lizard <br />   Pet Price: 25 <br />   Pet Name: Rex <br /><br />This will make a POST request to the /pets endpoint.</span></div>")),l("API Response"),h(" "),j("Waiting for input..."))},className:r().button,children:[g?"Close":"Open"," ",(0,s.jsx)("b",{children:"POST"})," /pets Form"]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),g&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_(P,y,E,k)},className:r().form,children:[(0,s.jsxs)("div",{className:r().formRow,children:[(0,s.jsx)("label",{htmlFor:"createPetId",children:"Pet ID:"}),(0,s.jsx)("input",{type:"number",id:"createPetId",value:P,onChange:e=>N(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:r().formRow,children:[(0,s.jsx)("label",{htmlFor:"petType",children:"Pet Type:"}),(0,s.jsx)("input",{type:"text",id:"petType",value:y,onChange:e=>f(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:r().formRow,children:[(0,s.jsx)("label",{htmlFor:"petPrice",children:"Pet Price:"}),(0,s.jsx)("input",{type:"text",id:"petPrice",value:E,onChange:e=>A(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:r().formRow,children:[(0,s.jsx)("label",{htmlFor:"petName",children:"Pet Name:"}),(0,s.jsx)("input",{type:"text",id:"petName",value:k,onChange:e=>I(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:r().accordionButton,children:"Submit"})]})]}),(0,s.jsxs)("div",{className:r().accordionContainer,children:[(0,s.jsx)("b",{children:"DELETE"})," Pet by ID",(0,s.jsx)("br",{}),(0,s.jsxs)("button",{onClick:()=>{v(!T),C(!1),x(!1),T||(n("DELETE Pet by ID"),p('<div class="'.concat(r().sourceCodeContainer,'"><span class="').concat(r().sourceCode,"\">To delete a pet by ID, enter the Pet ID in the form and click 'Submit'.<br /> This will make a DELETE request to the /pets/{id} endpoint.</span></div>")),l("API Response"),h(" "),j("Waiting for input..."))},className:r().button,children:[T?"Close":"Open"," ",(0,s.jsx)("b",{children:"DELETE"})," /pets/","{id}"," Form"]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),T&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),z(P)},className:r().form,children:[(0,s.jsxs)("div",{className:r().formRow,children:[(0,s.jsx)("label",{htmlFor:"deletePetId",children:"Pet ID:"}),(0,s.jsx)("input",{type:"text",id:"deletePetId",value:P,onChange:e=>N(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:r().accordionButton,children:"Submit"})]})]})]})]}),(0,s.jsxs)("div",{className:r().rightColumn,children:[(0,s.jsx)("p",{children:(0,s.jsx)("b",{children:t})}),(0,s.jsx)("pre",{dangerouslySetInnerHTML:{__html:d}}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{children:(0,s.jsx)("b",{children:i})}),(0,s.jsx)("pre",{dangerouslySetInnerHTML:{__html:m}}),u]})]}),(0,s.jsx)("footer",{className:r().footer,children:(0,s.jsx)("p",{children:"AWS - Wyld Pets Store Demo for re:Inforce 2025 - All Rights Reserved 2025"})})]})}},6715:(e,t,n)=>{e.exports=n(8440)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7276)),_N_E=e.O()}]);